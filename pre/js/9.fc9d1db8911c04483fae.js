webpackJsonp([9],{S5Vs:function(t,e){},tfax:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),l=s.n(i),a=s("P9l9"),n=(s("Xu2r"),s("IcnI"),s("NYxO")),o=s("mtWM"),r=s.n(o),c={data:function(){return{rules:[],questions:null,selectedQuestion:0}},computed:l()({},Object(n.b)({selectedItem:function(t){return t.selectedItem}})),mounted:function(){this.init()},methods:{selectQuestion:function(t){this.selectedQuestion=this.questions.findIndex(function(e){return e.qid==t})},addRule:function(){this.rules.push({sid:this.$route.params.sid,qid:"",qoid:"",target_qid:"",target_qid_arr:[]})},saveLogic:function(t){var e=this;this.rules[t].target_qid=this.rules[t].target_qid_arr.join(","),a.a.saveRule(this.rules[t]).then(function(s){s&&(e.rules[t].id=s.data.id)})},deleteLogic:function(t){var e=this;a.a.delelteLogic(this.rules[t].id).then(function(s){s&&e.rules.splice(t,1)})},init:function(){var t=this.$route.params.sid;if(t){var e=this;r.a.all([a.a.getInfo(t),a.a.getRuleList(t)]).then(function(t){e.questions=t[0].question.filter(function(t){return/^[1|2|4|5]/.test(t.qtype)}),t[1].data.forEach(function(t){t.target_qid_arr=t.target_qid.split(","),e.rules.push(t)})})}}}},u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main_right"},[s("div",{staticClass:"w1000 mt100 pl112"},[s("div",{staticClass:"logic_cot"},[s("div",{staticClass:"global_logic_tpl"},[s("div",{staticClass:"global_logic_set"},[s("div",{staticClass:"poplayer tccCon_t global_content"},[s("div",{staticClass:"logic_title"},[t._v("\n              跳转逻辑\n            ")]),t._v(" "),s("div",{staticClass:"logicsset jump_content"},[s("div",{staticClass:"jump_header"},[s("span",[t._v("共")]),t._v(" "),s("span",{staticClass:"tz_num"},[t._v(t._s(t.rules.length)+". ")]),t._v(" "),s("span",[t._v("条跳转逻辑")]),t._v(" "),s("a",{staticClass:"btn-add btn-add-jump",on:{click:t.addRule}},[s("i"),t._v("新增逻辑\n                    ")])]),t._v(" "),s("div",{staticClass:"global_jump",attrs:{id:"global_jump"}},[s("table",[s("tbody",t._l(t.rules,function(e,i){return s("tr",{key:i,staticClass:"jump_row jump_row_edit"},[s("td",{staticClass:"add_num"},[t._v("1. ")]),t._v(" "),s("td",[t._v("如果  ")]),t._v(" "),s("td",[s("el-select",{attrs:{placeholder:"请选择题目",size:"small"},on:{change:t.selectQuestion},model:{value:e.qid,callback:function(s){t.$set(e,"qid",s)},expression:"rule.qid"}},t._l(t.questions,function(t,e){return s("el-option",{key:t.qid,attrs:{label:"Q"+e+":"+t.subject,value:t.qid}})}),1)],1),t._v(" "),s("td",{staticClass:"td_txt",staticStyle:{"text-align":"center"}},[t._v("  选择了  ")]),t._v(" "),s("td",[s("el-select",{attrs:{placeholder:"请选择选项",size:"small"},model:{value:e.qoid,callback:function(s){t.$set(e,"qoid",s)},expression:"rule.qoid"}},t._l(t.questions[t.selectedQuestion].options,function(t){return s("el-option",{key:t.oid,attrs:{label:t.content,value:t.oid}})}),1),t._v(" "),s("em",[t._v("  则跳过  ")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择题目",size:"small",multiple:"","collapse-tags":""},on:{change:function(e){return t.saveLogic(i)}},model:{value:e.target_qid_arr,callback:function(s){t.$set(e,"target_qid_arr",s)},expression:"rule.target_qid_arr"}},t._l(t.questions,function(t,e){return s("el-option",{key:t.qid,attrs:{label:"Q"+e+":"+t.subject,value:t.qid}})}),1),t._v(" "),s("div",{staticClass:"reduce",on:{click:function(e){return t.deleteLogic(i)}}})],1)])}),0)])])])])])])])])])};u._withStripped=!0;var d={render:u,staticRenderFns:[]},_=d;var v=!1;var p=s("VU/8")(c,_,!1,function(t){v||s("S5Vs")},"data-v-1dfd8490",null);p.options.__file="src/views/question/edit/logic.vue";e.default=p.exports}});
//# sourceMappingURL=9.fc9d1db8911c04483fae.js.map