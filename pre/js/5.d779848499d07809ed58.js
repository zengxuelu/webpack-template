webpackJsonp([5],{KSeS:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("P9l9"),a=i("//Fk"),s=i.n(a),r=i("Dd8w"),l=i.n(r),n=i("NYxO"),c=(i("Xu2r"),i("IcnI"),{computed:l()({},Object(n.b)({selectedItem:function(e){return e.selectedItem},questions:function(e){return e.questions}})),data:function(){return{activeName:"1",selectedType:1,opacity:100,color:"",optionColor:"",optionHighlightColor:"",textColor:"",bgSrc:"",header:"",types:[{value:1,label:"上传图片"},{value:2,label:"选择颜色"}]}},mounted:function(){this.init()},watch:{color:function(e){this.refresh()},optionColor:function(){this.refresh()},optionHighlightColor:function(){this.refresh()},textColor:function(){this.refresh()}},methods:{uploadFile:function(e,t){var i=this;o.a.upload(e.target.files).then(function(e){e&&(i[t]=e.data[0].pic,i.refresh())})},refresh:function(){var e=this;this.saveStyle().then(function(t){e.$emit("refresh-iframe")})},init:function(){var e=this;this.$route.params.sid&&o.a.getInfo(this.$route.params.sid).then(function(t){if(t){var i=t.data.style;i&&(i.color?e.selectedType=2:e.selectedType=1,e.opacity=i.opacity,e.color=i.color,e.bgSrc=i.bgSrc,e.header=i.header,e.optionColor=i.optionColor,e.optionHighlightColor=i.optionHighlightColor,e.textColor=i.textColor)}})},deleteImg:function(e){this[e]="",this.refresh()},saveStyle:function(){var e=this,t={opacity:this.opacity,header:this.header};return 1==this.selectedType?(t.bgSrc=this.bgSrc,t.color=""):(t.color=this.color?this.color:"",t.bgSrc=""),t.optionHighlightColor=this.optionHighlightColor?this.optionHighlightColor:"",t.optionColor=this.optionColor?this.optionColor:"",t.textColor=this.textColor?this.textColor:"",new s.a(function(i,a){o.a.updateSurvery({sid:e.$route.params.sid,style:t}).then(function(e){i()})})}}}),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"set_appear_main_wrap slideInRight animated",staticStyle:{opacity:"1",display:"block",right:"0px"}},[i("div",{staticClass:"question_setting"},[i("div",{staticClass:"q_title"},[e._v("\n            外观设置\n        ")]),e._v(" "),i("div",{staticClass:"block"},[i("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-collapse-item",{attrs:{title:"头图",name:"1"}},[i("div",{staticClass:"block_sb mb-25"},[i("div",[e._v("头图设置")]),e._v(" "),e.header?e._e():i("label",{staticClass:"upload",attrs:{for:"uplodeheader"}},[e._v("\n                            上传图片"),i("input",{attrs:{type:"file",name:"uplodeheader",accept:"image/png, image/jpeg, image/jpg, image/gif"},on:{change:function(t){return e.uploadFile(t,"header")}}})]),e._v(" "),e.header?i("label",{staticClass:"lable_style",attrs:{for:"uplodebackground"}},[i("img",{attrs:{src:e.header}}),e._v(" "),i("i",{staticClass:"icon_wj delete_icon",on:{click:function(t){return e.deleteImg("header")}}})]):e._e()])]),e._v(" "),i("el-collapse-item",{attrs:{title:"背景",name:"2"}},[i("div",{staticClass:"block_sb"},[i("div",[e._v("背景设置")]),e._v(" "),i("div",{staticClass:"tab_layout"},e._l(e.types,function(t){return i("a",{key:t.value,staticClass:"btn_text_icon btn_layout btn-layout-single",class:{checked:t.value==e.selectedType},on:{click:function(i){e.selectedType=t.value}}},[e._v(e._s(t.label))])}),0)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.selectedType,expression:"selectedType == 1"}],staticClass:"block_sb fadeIn animated"},[i("div",[e._v("背景图片")]),e._v(" "),e.bgSrc?e._e():i("label",{staticClass:"upload",attrs:{for:"uplodeheader"}},[e._v("\n                            上传图片"),i("input",{attrs:{type:"file",name:"uplodeheader",accept:"image/png, image/jpeg, image/jpg, image/gif"},on:{change:function(t){return e.uploadFile(t,"bgSrc")}}})]),e._v(" "),e.bgSrc?i("label",{staticClass:"lable_style",attrs:{for:"uplodebackground"}},[i("img",{attrs:{src:e.bgSrc}}),e._v(" "),i("i",{staticClass:"icon_wj delete_icon",on:{click:function(t){return e.deleteImg("bgSrc")}}})]):e._e()]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.selectedType,expression:"selectedType == 2"}],staticClass:"block_sb fadeIn animated"},[i("div",[e._v("背景颜色")]),e._v(" "),i("el-color-picker",{attrs:{size:"mini"},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1),e._v(" "),i("div",{staticClass:"block_sb"},[i("div",[e._v("底色透明度")])]),e._v(" "),i("el-slider",{attrs:{"show-input":"","show-input-controls":!1},on:{change:e.refresh},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}})],1),e._v(" "),i("el-collapse-item",{attrs:{title:"文字",name:"3"}},[i("div",{staticClass:"block_sb mb-25 fadeIn animated"},[i("div",[e._v("文字颜色")]),e._v(" "),i("el-color-picker",{attrs:{size:"mini"},model:{value:e.textColor,callback:function(t){e.textColor=t},expression:"textColor"}})],1)]),e._v(" "),i("el-collapse-item",{attrs:{title:"选项",name:"4"}},[i("div",{staticClass:"block_sb fadeIn animated"},[i("div",[e._v("选项背景色")]),e._v(" "),i("el-color-picker",{attrs:{size:"mini"},model:{value:e.optionColor,callback:function(t){e.optionColor=t},expression:"optionColor"}})],1),e._v(" "),i("div",{staticClass:"block_sb mb-25 fadeIn animated"},[i("div",[e._v("选项选中色")]),e._v(" "),i("el-color-picker",{attrs:{size:"mini"},model:{value:e.optionHighlightColor,callback:function(t){e.optionHighlightColor=t},expression:"optionHighlightColor"}})],1)])],1)],1)])])};d._withStripped=!0;var p={render:d,staticRenderFns:[]},u=p;var v=!1;var h=i("VU/8")(c,u,!1,function(e){v||i("aVGc")},null,null);h.options.__file="src/components/setAppear.vue";var f={data:function(){return{baseUrl:"//survey.dev.ztgame.com/fe/#/site/"}},components:{setAppear:h.exports},mounted:function(){this.$refs.site.style.height=document.body.clientHeight-106+"px"},methods:{refreshIframe:function(){this.$refs.iframe.contentWindow.postMessage("refresh")}}},m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"list-template-container"},[i("div",{staticClass:"content"},[i("div",{staticClass:"theme_show_wrap appear_setting"},[i("div",{staticClass:"preview_iframe"},[i("div",{ref:"site",staticClass:"site"},[i("iframe",{ref:"iframe",attrs:{frameborder:"0",name:"iframe",src:e.baseUrl+e.$route.params.sid}})])])])]),e._v(" "),i("set-appear",{on:{"refresh-iframe":function(t){return e.refreshIframe()}}})],1)};m._withStripped=!0;var _={render:m,staticRenderFns:[]},g=_;var b=!1;var C=i("VU/8")(f,g,!1,function(e){b||i("u7Sm")},"data-v-ee1ae90c",null);C.options.__file="src/views/question/edit/appearance.vue";t.default=C.exports},aVGc:function(e,t){},u7Sm:function(e,t){}});
//# sourceMappingURL=5.d779848499d07809ed58.js.map